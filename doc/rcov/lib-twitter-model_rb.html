<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>
      lib/twitter/model.rb - C0 code coverage information
    </title>
    <style type='text/css'>
      body { background-color: rgb(240, 240, 245); }
    </style>
    <style type='text/css'>
      span.cross-ref-title { font-size: 140%; } span.cross-ref a {
      text-decoration: none; } span.cross-ref { background-color:#f3f7fa;
      border: 1px dashed #333; margin: 1em; padding: 0.5em; overflow: hidden; }
      a.crossref-toggle { text-decoration: none; } span.marked0 {
      background-color: rgb(185, 210, 200); display: block; } span.marked1 {
      background-color: rgb(190, 215, 205); display: block; } span.inferred0 {
      background-color: rgb(175, 200, 200); display: block; } span.inferred1 {
      background-color: rgb(180, 205, 205); display: block; } span.uncovered0 {
      background-color: rgb(225, 110, 110); display: block; } span.uncovered1 {
      background-color: rgb(235, 120, 120); display: block; } span.overview {
      border-bottom: 8px solid black; } div.overview { border-bottom: 8px solid
      black; } body { font-family: verdana, arial, helvetica; } div.footer {
      font-size: 68%; margin-top: 1.5em; } h1, h2, h3, h4, h5, h6 {
      margin-bottom: 0.5em; } h5 { margin-top: 0.5em; } .hidden { display: none;
      } div.separator { height: 10px; } /* Commented out for better readability,
      esp. on IE */ /* table tr td, table tr th { font-size: 68%; } td.value
      table tr td { font-size: 11px; } */ table.percent_graph { height: 12px;
      border: #808080 1px solid; empty-cells: show; } table.percent_graph
      td.covered { height: 10px; background: #00f000; } table.percent_graph
      td.uncovered { height: 10px; background: #e00000; } table.percent_graph
      td.NA { height: 10px; background: #eaeaea; } table.report {
      border-collapse: collapse; width: 100%; } table.report td.heading {
      background: #dcecff; border: #d0d0d0 1px solid; font-weight: bold;
      text-align: center; } table.report td.heading:hover { background: #c0ffc0;
      } table.report td.text { border: #d0d0d0 1px solid; } table.report
      td.value, table.report td.lines_total, table.report td.lines_code {
      text-align: right; border: #d0d0d0 1px solid; } table.report tr.light {
      background-color: rgb(240, 240, 245); } table.report tr.dark {
      background-color: rgb(230, 230, 235); } 
    </style>
    <script type='text/javascript'>
       // <![CDATA[ function toggleCode( id ) { if ( document.getElementById )
      elem = document.getElementById( id ); else if ( document.all ) elem =
      eval( "document.all." + id ); else return false; elemStyle = elem.style;
      if ( elemStyle.display != "block" ) { elemStyle.display = "block" } else {
      elemStyle.display = "none" } return true; } // Make cross-references
      hidden by default document.writeln( "<style
      type=\"text/css\">span.cross-ref { display: none }</style>" ) // ]]> 
    </script>
    <style type='text/css'>
      span.run0 { background-color: rgb(178, 204, 255); display: block; }
      span.run1 { background-color: rgb(178, 206, 255); display: block; }
      span.run2 { background-color: rgb(178, 209, 255); display: block; }
      span.run3 { background-color: rgb(178, 211, 255); display: block; }
      span.run4 { background-color: rgb(178, 214, 255); display: block; }
      span.run5 { background-color: rgb(178, 218, 255); display: block; }
      span.run6 { background-color: rgb(178, 220, 255); display: block; }
      span.run7 { background-color: rgb(178, 223, 255); display: block; }
      span.run8 { background-color: rgb(178, 225, 255); display: block; }
      span.run9 { background-color: rgb(178, 228, 255); display: block; }
      span.run10 { background-color: rgb(178, 232, 255); display: block; }
      span.run11 { background-color: rgb(178, 234, 255); display: block; }
      span.run12 { background-color: rgb(178, 237, 255); display: block; }
      span.run13 { background-color: rgb(178, 239, 255); display: block; }
      span.run14 { background-color: rgb(178, 242, 255); display: block; }
      span.run15 { background-color: rgb(178, 246, 255); display: block; }
      span.run16 { background-color: rgb(178, 248, 255); display: block; }
      span.run17 { background-color: rgb(178, 251, 255); display: block; }
      span.run18 { background-color: rgb(178, 253, 255); display: block; }
      span.run19 { background-color: rgb(178, 255, 253); display: block; }
      span.run20 { background-color: rgb(178, 255, 249); display: block; }
      span.run21 { background-color: rgb(178, 255, 247); display: block; }
      span.run22 { background-color: rgb(178, 255, 244); display: block; }
      span.run23 { background-color: rgb(178, 255, 242); display: block; }
      span.run24 { background-color: rgb(178, 255, 239); display: block; }
      span.run25 { background-color: rgb(178, 255, 235); display: block; }
      span.run26 { background-color: rgb(178, 255, 233); display: block; }
      span.run27 { background-color: rgb(178, 255, 230); display: block; }
      span.run28 { background-color: rgb(178, 255, 228); display: block; }
      span.run29 { background-color: rgb(178, 255, 225); display: block; }
      span.run30 { background-color: rgb(178, 255, 221); display: block; }
      span.run31 { background-color: rgb(178, 255, 219); display: block; }
      span.run32 { background-color: rgb(178, 255, 216); display: block; }
      span.run33 { background-color: rgb(178, 255, 214); display: block; }
      span.run34 { background-color: rgb(178, 255, 211); display: block; }
      span.run35 { background-color: rgb(178, 255, 207); display: block; }
      span.run36 { background-color: rgb(178, 255, 205); display: block; }
      span.run37 { background-color: rgb(178, 255, 202); display: block; }
      span.run38 { background-color: rgb(178, 255, 200); display: block; }
      span.run39 { background-color: rgb(178, 255, 197); display: block; }
      span.run40 { background-color: rgb(178, 255, 193); display: block; }
      span.run41 { background-color: rgb(178, 255, 191); display: block; }
      span.run42 { background-color: rgb(178, 255, 188); display: block; }
      span.run43 { background-color: rgb(178, 255, 186); display: block; }
      span.run44 { background-color: rgb(178, 255, 183); display: block; }
      span.run45 { background-color: rgb(178, 255, 179); display: block; }
      span.run46 { background-color: rgb(179, 255, 178); display: block; }
      span.run47 { background-color: rgb(182, 255, 178); display: block; }
      span.run48 { background-color: rgb(184, 255, 178); display: block; }
      span.run49 { background-color: rgb(187, 255, 178); display: block; }
      span.run50 { background-color: rgb(191, 255, 178); display: block; }
      span.run51 { background-color: rgb(193, 255, 178); display: block; }
      span.run52 { background-color: rgb(196, 255, 178); display: block; }
      span.run53 { background-color: rgb(198, 255, 178); display: block; }
      span.run54 { background-color: rgb(201, 255, 178); display: block; }
      span.run55 { background-color: rgb(205, 255, 178); display: block; }
      span.run56 { background-color: rgb(207, 255, 178); display: block; }
      span.run57 { background-color: rgb(210, 255, 178); display: block; }
      span.run58 { background-color: rgb(212, 255, 178); display: block; }
      span.run59 { background-color: rgb(215, 255, 178); display: block; }
      span.run60 { background-color: rgb(219, 255, 178); display: block; }
      span.run61 { background-color: rgb(221, 255, 178); display: block; }
      span.run62 { background-color: rgb(224, 255, 178); display: block; }
      span.run63 { background-color: rgb(226, 255, 178); display: block; }
      span.run64 { background-color: rgb(229, 255, 178); display: block; }
      span.run65 { background-color: rgb(233, 255, 178); display: block; }
      span.run66 { background-color: rgb(235, 255, 178); display: block; }
      span.run67 { background-color: rgb(238, 255, 178); display: block; }
      span.run68 { background-color: rgb(240, 255, 178); display: block; }
      span.run69 { background-color: rgb(243, 255, 178); display: block; }
      span.run70 { background-color: rgb(247, 255, 178); display: block; }
      span.run71 { background-color: rgb(249, 255, 178); display: block; }
      span.run72 { background-color: rgb(252, 255, 178); display: block; }
      span.run73 { background-color: rgb(255, 255, 178); display: block; }
      span.run74 { background-color: rgb(255, 252, 178); display: block; }
      span.run75 { background-color: rgb(255, 248, 178); display: block; }
      span.run76 { background-color: rgb(255, 246, 178); display: block; }
      span.run77 { background-color: rgb(255, 243, 178); display: block; }
      span.run78 { background-color: rgb(255, 240, 178); display: block; }
      span.run79 { background-color: rgb(255, 238, 178); display: block; }
      span.run80 { background-color: rgb(255, 234, 178); display: block; }
      span.run81 { background-color: rgb(255, 232, 178); display: block; }
      span.run82 { background-color: rgb(255, 229, 178); display: block; }
      span.run83 { background-color: rgb(255, 226, 178); display: block; }
      span.run84 { background-color: rgb(255, 224, 178); display: block; }
      span.run85 { background-color: rgb(255, 220, 178); display: block; }
      span.run86 { background-color: rgb(255, 218, 178); display: block; }
      span.run87 { background-color: rgb(255, 215, 178); display: block; }
      span.run88 { background-color: rgb(255, 212, 178); display: block; }
      span.run89 { background-color: rgb(255, 210, 178); display: block; }
      span.run90 { background-color: rgb(255, 206, 178); display: block; }
      span.run91 { background-color: rgb(255, 204, 178); display: block; }
      span.run92 { background-color: rgb(255, 201, 178); display: block; }
      span.run93 { background-color: rgb(255, 198, 178); display: block; }
      span.run94 { background-color: rgb(255, 196, 178); display: block; }
      span.run95 { background-color: rgb(255, 192, 178); display: block; }
      span.run96 { background-color: rgb(255, 189, 178); display: block; }
      span.run97 { background-color: rgb(255, 187, 178); display: block; }
      span.run98 { background-color: rgb(255, 184, 178); display: block; }
      span.run99 { background-color: rgb(255, 182, 178); display: block; }
      span.run100 { background-color: rgb(255, 178, 178); display: block; } 
    </style>
  </head>
  <body>
    <h3>
      C0 code coverage information
    </h3>
    <p>
      Generated on Sun, 04 Nov 2007 19:15:16 -0600 with 
      <a href='http://eigenclass.org/hiki.rb?rcov'>
        rcov 0.8.0
      </a>
    </p>
    <hr />
    <pre><span class='marked0'>Code reported as executed by Ruby looks like
    this... </span><span class='marked1'>and this: this line is also marked as
    covered. </span><span class='inferred0'>Lines considered as run by rcov, but
    not reported by Ruby, look like this, </span><span class='inferred1'>and
    this: these lines were inferred by rcov (using simple heuristics).
    </span><span class='uncovered0'>Finally, here&apos;s a line marked as not
    executed. </span></pre> 
    <table class='report'> <thead> <tr> <td class='heading'> Name </td> <td
    class='heading'> Total lines </td> <td class='heading'> Lines of code </td>
    <td class='heading'> Total coverage </td> <td class='heading'> Code coverage
    </td> </tr> </thead> <tbody> <tr class='light'> <td> <a
    href='lib-twitter-model_rb.html'> lib/twitter/model.rb </a> </td> <td
    class='lines_total'> <tt> 331 </tt> </td> <td class='lines_code'> <tt> 144
    </tt> </td> <td> <table cellspacing='0' cellpadding='0' align='right'> <tr>
    <td> <tt class='coverage_total'> 100.0% </tt> &nbsp; </td> <td> <table
    cellspacing='0' class='percent_graph' cellpadding='0' width='100'> <tr> <td
    class='covered' width='100' /> <td class='uncovered' width='0' /> </tr>
    </table> </td> </tr> </table> </td> <td> <table cellspacing='0'
    cellpadding='0' align='right'> <tr> <td> <tt class='coverage_code'> 100.0%
    </tt> &nbsp; </td> <td> <table cellspacing='0' class='percent_graph'
    cellpadding='0' width='100'> <tr> <td class='covered' width='100' /> <td
    class='uncovered' width='0' /> </tr> </table> </td> </tr> </table> </td>
    </tr> </tbody> </table><pre><span class="inferred0"><a name="line1" /> 1 #
    Contains Twitter4R Model API. </span><span class="inferred1"><a name="line2"
    /> 2 </span><span class="marked0"><a name="line3" /> 3 module Twitter
    </span><span class="inferred1"><a name="line4" /> 4 # Mixin module for model
    classes. Includes generic class methods like </span><span
    class="inferred0"><a name="line5" /> 5 # unmarshal. </span><span
    class="inferred1"><a name="line6" /> 6 # </span><span class="inferred0"><a
    name="line7" /> 7 # To create a new model that includes this mixin's
    features simply: </span><span class="inferred1"><a name="line8" /> 8 # class
    NewModel </span><span class="inferred0"><a name="line9" /> 9 # include
    Twitter::ModelMixin </span><span class="inferred1"><a name="line10" /> 10 #
    end </span><span class="inferred0"><a name="line11" /> 11 # </span><span
    class="inferred1"><a name="line12" /> 12 # This mixin module automatically
    includes &lt;tt&gt;Twitter::ClassUtilMixin&lt;/tt&gt; </span><span
    class="inferred0"><a name="line13" /> 13 # features. </span><span
    class="inferred1"><a name="line14" /> 14 # </span><span class="inferred0"><a
    name="line15" /> 15 # The contract for models to use this mixin correctly is
    that the class </span><span class="inferred1"><a name="line16" /> 16 #
    including this mixin must provide an class method named
    &lt;tt&gt;attributes&lt;/tt&gt; </span><span class="inferred0"><a
    name="line17" /> 17 # that will return an Array of attribute symbols that
    will be checked </span><span class="inferred1"><a name="line18" /> 18 # in
    #eql? override method. The following would be sufficient: </span><span
    class="inferred0"><a name="line19" /> 19 # def self.attributes;
    @@ATTRIBUTES; end </span><span class="marked1"><a name="line20" /> 20 module
    ModelMixin #:nodoc: </span><span class="marked0"><a name="line21" /> 21 def
    self.included(base) #:nodoc: </span><span class="marked1"><a name="line22"
    /> 22 base.send(:include, Twitter::ClassUtilMixin) </span><span
    class="marked0"><a name="line23" /> 23 base.send(:include, InstanceMethods)
    </span><span class="marked1"><a name="line24" /> 24
    base.extend(ClassMethods) </span><span class="inferred0"><a name="line25" />
    25 end </span><span class="inferred1"><a name="line26" /> 26 </span><span
    class="inferred0"><a name="line27" /> 27 # Class methods defined for
    &lt;tt&gt;Twitter::ModelMixin&lt;/tt&gt; module. </span><span
    class="marked1"><a name="line28" /> 28 module ClassMethods #:nodoc:
    </span><span class="inferred0"><a name="line29" /> 29 # Unmarshal object
    singular or plural array of model objects </span><span class="inferred1"><a
    name="line30" /> 30 # from JSON serialization. Currently JSON is only
    supported </span><span class="inferred0"><a name="line31" /> 31 # since this
    is all &lt;tt&gt;Twitter4R&lt;/tt&gt; needs. </span><span class="marked1"><a
    name="line32" /> 32 def unmarshal(raw) </span><span class="marked0"><a
    name="line33" /> 33 input = JSON.parse(raw) </span><span class="marked1"><a
    name="line34" /> 34 def unmarshal_model(hash) </span><span
    class="marked0"><a name="line35" /> 35 self.new(hash) </span><span
    class="marked1"><a name="line36" /> 36 end </span><span class="marked0"><a
    name="line37" /> 37 return unmarshal_model(input) if input.is_a?(Hash) #
    singular case </span><span class="marked1"><a name="line38" /> 38 result =
    [] </span><span class="inferred0"><a name="line39" /> 39 input.each do
    |hash| </span><span class="marked1"><a name="line40" /> 40 model =
    unmarshal_model(hash) if hash.is_a?(Hash) </span><span class="marked0"><a
    name="line41" /> 41 result &lt;&lt; model </span><span class="marked1"><a
    name="line42" /> 42 end if input.is_a?(Array) </span><span
    class="marked0"><a name="line43" /> 43 result # plural case </span><span
    class="inferred1"><a name="line44" /> 44 end </span><span
    class="inferred0"><a name="line45" /> 45 end </span><span
    class="inferred1"><a name="line46" /> 46 </span><span class="inferred0"><a
    name="line47" /> 47 # Instance methods defined for
    &lt;tt&gt;Twitter::ModelMixin&lt;/tt&gt; module. </span><span
    class="marked1"><a name="line48" /> 48 module InstanceMethods #:nodoc:
    </span><span class="marked0"><a name="line49" /> 49 attr_accessor :client
    </span><span class="inferred1"><a name="line50" /> 50 # Equality method
    override of Object#eql? default. </span><span class="inferred0"><a
    name="line51" /> 51 # </span><span class="inferred1"><a name="line52" /> 52
    # Relies on the class using this mixin to provide a
    &lt;tt&gt;attributes&lt;/tt&gt; </span><span class="inferred0"><a
    name="line53" /> 53 # class method that will return an Array of attributes
    to check are </span><span class="inferred1"><a name="line54" /> 54 #
    equivalent in this #eql? override. </span><span class="inferred0"><a
    name="line55" /> 55 # </span><span class="inferred1"><a name="line56" /> 56
    # It is by design that the #eql? method will raise a NoMethodError
    </span><span class="inferred0"><a name="line57" /> 57 # if no
    &lt;tt&gt;attributes&lt;/tt&gt; class method exists, to alert you that
    </span><span class="inferred1"><a name="line58" /> 58 # you must provide it
    for a meaningful result from this #eql? override. </span><span
    class="inferred0"><a name="line59" /> 59 # Otherwise this will return a
    meaningless result. </span><span class="marked1"><a name="line60" /> 60 def
    eql?(other) </span><span class="marked0"><a name="line61" /> 61 attrs =
    self.class.attributes </span><span class="marked1"><a name="line62" /> 62
    attrs.each do |att| </span><span class="marked0"><a name="line63" /> 63
    return false unless self.send(att).eql?(other.send(att)) </span><span
    class="inferred1"><a name="line64" /> 64 end </span><span class="marked0"><a
    name="line65" /> 65 true </span><span class="inferred1"><a name="line66" />
    66 end </span><span class="inferred0"><a name="line67" /> 67 </span><span
    class="inferred1"><a name="line68" /> 68 # Returns integer representation of
    model object instance. </span><span class="inferred0"><a name="line69" /> 69
    # </span><span class="inferred1"><a name="line70" /> 70 # For example,
    </span><span class="inferred0"><a name="line71" /> 71 # status =
    Twitter::Status.new(:id =&gt; 234343) </span><span class="inferred1"><a
    name="line72" /> 72 # status.to_i #=&gt; 234343 </span><span
    class="marked0"><a name="line73" /> 73 def to_i </span><span
    class="marked1"><a name="line74" /> 74 @id </span><span class="marked0"><a
    name="line75" /> 75 end </span><span class="inferred1"><a name="line76" />
    76 </span><span class="inferred0"><a name="line77" /> 77 # Returns string
    representation of model object instance. </span><span class="inferred1"><a
    name="line78" /> 78 # </span><span class="inferred0"><a name="line79" /> 79
    # For example, </span><span class="inferred1"><a name="line80" /> 80 #
    status = Twitter::Status.new(:text =&gt; 'my status message') </span><span
    class="inferred0"><a name="line81" /> 81 # status.to_s #=&gt; 'my status
    message' </span><span class="inferred1"><a name="line82" /> 82 #
    </span><span class="inferred0"><a name="line83" /> 83 # If a model class
    doesn't have a @text attribute defined </span><span class="inferred1"><a
    name="line84" /> 84 # the default Object#to_s will be returned as the
    result. </span><span class="marked0"><a name="line85" /> 85 def to_s
    </span><span class="marked1"><a name="line86" /> 86 self.respond_to?(:text)
    ? @text : super.to_s </span><span class="marked0"><a name="line87" /> 87 end
    </span><span class="inferred1"><a name="line88" /> 88 </span><span
    class="inferred0"><a name="line89" /> 89 # Returns hash representation of
    model object instance. </span><span class="inferred1"><a name="line90" /> 90
    # </span><span class="inferred0"><a name="line91" /> 91 # For example,
    </span><span class="inferred1"><a name="line92" /> 92 # u =
    Twitter::User.new(:id =&gt; 2342342, :screen_name =&gt;
    'tony_blair_is_the_devil') </span><span class="inferred0"><a name="line93"
    /> 93 # u.to_hash #=&gt; {:id =&gt; 2342342, :screen_name =&gt;
    'tony_blair_is_the_devil'} </span><span class="inferred1"><a name="line94"
    /> 94 # </span><span class="inferred0"><a name="line95" /> 95 # This method
    also requires that the class method &lt;tt&gt;attributes&lt;/tt&gt; be
    </span><span class="inferred1"><a name="line96" /> 96 # defined to return an
    Array of attributes for the class. </span><span class="marked0"><a
    name="line97" /> 97 def to_hash </span><span class="marked1"><a
    name="line98" /> 98 attrs = self.class.attributes </span><span
    class="marked0"><a name="line99" /> 99 result = {} </span><span
    class="marked1"><a name="line100" />100 attrs.each do |att| </span><span
    class="marked0"><a name="line101" />101 value = self.send(att) </span><span
    class="marked1"><a name="line102" />102 value = value.to_hash if
    value.respond_to?(:to_hash) </span><span class="marked0"><a name="line103"
    />103 result[att] = value if value </span><span class="inferred1"><a
    name="line104" />104 end </span><span class="marked0"><a name="line105"
    />105 result </span><span class="inferred1"><a name="line106" />106 end
    </span><span class="inferred0"><a name="line107" />107 </span><span
    class="inferred1"><a name="line108" />108 # &quot;Blesses&quot; model
    object. </span><span class="inferred0"><a name="line109" />109 #
    </span><span class="inferred1"><a name="line110" />110 # Should be
    overridden by model class if special behavior is expected </span><span
    class="inferred0"><a name="line111" />111 # </span><span
    class="inferred1"><a name="line112" />112 # Expected to return blessed
    object (usually &lt;tt&gt;self&lt;/tt&gt;) </span><span class="marked0"><a
    name="line113" />113 def bless(client) </span><span class="marked1"><a
    name="line114" />114 self.basic_bless(client) </span><span
    class="marked0"><a name="line115" />115 end </span><span
    class="inferred1"><a name="line116" />116 </span><span class="marked0"><a
    name="line117" />117 protected </span><span class="inferred1"><a
    name="line118" />118 # Basic &quot;blessing&quot; of model object
    </span><span class="marked0"><a name="line119" />119 def basic_bless(client)
    </span><span class="marked1"><a name="line120" />120 self.client = client
    </span><span class="marked0"><a name="line121" />121 self </span><span
    class="inferred1"><a name="line122" />122 end </span><span
    class="inferred0"><a name="line123" />123 end </span><span
    class="inferred1"><a name="line124" />124 end </span><span
    class="inferred0"><a name="line125" />125 </span><span class="marked1"><a
    name="line126" />126 module AuthenticatedUserMixin </span><span
    class="marked0"><a name="line127" />127 def self.included(base) </span><span
    class="marked1"><a name="line128" />128 base.send(:include, InstanceMethods)
    </span><span class="marked0"><a name="line129" />129 end </span><span
    class="inferred1"><a name="line130" />130 </span><span class="marked0"><a
    name="line131" />131 module InstanceMethods </span><span
    class="inferred1"><a name="line132" />132 # Returns an Array of user objects
    that represents the authenticated </span><span class="inferred0"><a
    name="line133" />133 # user's friends on Twitter. </span><span
    class="marked1"><a name="line134" />134 def followers </span><span
    class="marked0"><a name="line135" />135 @client.my(:followers) </span><span
    class="marked1"><a name="line136" />136 end </span><span
    class="inferred0"><a name="line137" />137 </span><span class="inferred1"><a
    name="line138" />138 # Adds given user as a friend. Returns user object as
    given by </span><span class="inferred0"><a name="line139" />139 #
    &lt;tt&gt;Twitter&lt;/tt&gt; REST server response. </span><span
    class="inferred1"><a name="line140" />140 # </span><span
    class="inferred0"><a name="line141" />141 # For &lt;tt&gt;user&lt;/tt&gt;
    argument you may pass in the unique integer </span><span
    class="inferred1"><a name="line142" />142 # user ID, screen name or
    Twitter::User object representation. </span><span class="marked0"><a
    name="line143" />143 def befriend(user) </span><span class="marked1"><a
    name="line144" />144 @client.friend(:add, user) </span><span
    class="marked0"><a name="line145" />145 end </span><span
    class="inferred1"><a name="line146" />146 </span><span class="inferred0"><a
    name="line147" />147 # Removes given user as a friend. Returns user object
    as given by </span><span class="inferred1"><a name="line148" />148 #
    &lt;tt&gt;Twitter&lt;/tt&gt; REST server response. </span><span
    class="inferred0"><a name="line149" />149 # </span><span
    class="inferred1"><a name="line150" />150 # For &lt;tt&gt;user&lt;/tt&gt;
    argument you may pass in the unique integer </span><span
    class="inferred0"><a name="line151" />151 # user ID, screen name or
    Twitter::User object representation. </span><span class="marked1"><a
    name="line152" />152 def defriend(user) </span><span class="marked0"><a
    name="line153" />153 @client.friend(:remove, user) </span><span
    class="marked1"><a name="line154" />154 end </span><span
    class="inferred0"><a name="line155" />155 end </span><span
    class="inferred1"><a name="line156" />156 end </span><span
    class="inferred0"><a name="line157" />157 </span><span class="inferred1"><a
    name="line158" />158 # Represents a &lt;tt&gt;Twitter&lt;/tt&gt; user
    </span><span class="marked0"><a name="line159" />159 class User </span><span
    class="marked1"><a name="line160" />160 include ModelMixin </span><span
    class="marked0"><a name="line161" />161 @@ATTRIBUTES = [:id, :name,
    :description, :location, :screen_name, :url, :profile_image_url, :protected]
    </span><span class="marked1"><a name="line162" />162 attr_accessor
    *@@ATTRIBUTES </span><span class="inferred0"><a name="line163" />163
    </span><span class="marked1"><a name="line164" />164 class &lt;&lt; self
    </span><span class="inferred0"><a name="line165" />165 # Used as factory
    method callback </span><span class="marked1"><a name="line166" />166 def
    attributes; @@ATTRIBUTES; end </span><span class="inferred0"><a
    name="line167" />167 </span><span class="inferred1"><a name="line168" />168
    # Returns user model object with given &lt;tt&gt;id&lt;/tt&gt; using the
    configuration </span><span class="inferred0"><a name="line169" />169 # and
    credentials of the &lt;tt&gt;client&lt;/tt&gt; object passed in.
    </span><span class="inferred1"><a name="line170" />170 # </span><span
    class="inferred0"><a name="line171" />171 # You can pass in either the
    user's unique integer ID or the user's </span><span class="inferred1"><a
    name="line172" />172 # screen name. </span><span class="marked0"><a
    name="line173" />173 def find(id, client) </span><span class="marked1"><a
    name="line174" />174 client.user(id) </span><span class="marked0"><a
    name="line175" />175 end </span><span class="inferred1"><a name="line176"
    />176 end </span><span class="inferred0"><a name="line177" />177
    </span><span class="inferred1"><a name="line178" />178 # Override of
    ModelMixin#bless method. </span><span class="inferred0"><a name="line179"
    />179 # </span><span class="inferred1"><a name="line180" />180 # Adds
    #followers instance method when user object represents </span><span
    class="inferred0"><a name="line181" />181 # authenticated user. Otherwise
    just do basic bless. </span><span class="inferred1"><a name="line182" />182
    # </span><span class="inferred0"><a name="line183" />183 # This permits
    applications using &lt;tt&gt;Twitter4R&lt;/tt&gt; to write </span><span
    class="inferred1"><a name="line184" />184 # Rubyish code like this:
    </span><span class="inferred0"><a name="line185" />185 # followers =
    user.followers if user.is_me? </span><span class="inferred1"><a
    name="line186" />186 # Or: </span><span class="inferred0"><a name="line187"
    />187 # followers = user.followers if user.respond_to?(:followers)
    </span><span class="marked1"><a name="line188" />188 def bless(client)
    </span><span class="marked0"><a name="line189" />189 basic_bless(client)
    </span><span class="inferred1"><a name="line190" />190 self.instance_eval(%{
    </span><span class="inferred0"><a name="line191" />191
    self.class.send(:include, Twitter::AuthenticatedUserMixin) </span><span
    class="marked1"><a name="line192" />192 }) if self.is_me? and not
    self.respond_to?(:followers) </span><span class="marked0"><a name="line193"
    />193 self </span><span class="inferred1"><a name="line194" />194 end
    </span><span class="inferred0"><a name="line195" />195 </span><span
    class="inferred1"><a name="line196" />196 # Returns whether this
    &lt;tt&gt;Twitter::User&lt;/tt&gt; model object </span><span
    class="inferred0"><a name="line197" />197 # represents the authenticated
    user of the &lt;tt&gt;client&lt;/tt&gt; </span><span class="inferred1"><a
    name="line198" />198 # that blessed it. </span><span class="marked0"><a
    name="line199" />199 def is_me? </span><span class="inferred1"><a
    name="line200" />200 # TODO: Determine whether we should cache this or not?
    </span><span class="inferred0"><a name="line201" />201 # Might be dangerous
    to do so, but do we want to support </span><span class="inferred1"><a
    name="line202" />202 # the edge case where this would cause a problem? i.e.
    </span><span class="inferred0"><a name="line203" />203 # changing
    authenticated user after initial use of </span><span class="inferred1"><a
    name="line204" />204 # authenticated API. </span><span class="inferred0"><a
    name="line205" />205 # TBD: To cache or not to cache. That is the question!
    </span><span class="inferred1"><a name="line206" />206 # Since this is an
    implementation detail we can leave this for </span><span
    class="inferred0"><a name="line207" />207 # subsequent 0.2.x releases. It
    doesn't have to be decided before </span><span class="inferred1"><a
    name="line208" />208 # the 0.2.0 launch. </span><span class="marked0"><a
    name="line209" />209 @screen_name ==
    @client.instance_eval(&quot;@login&quot;) </span><span class="marked1"><a
    name="line210" />210 end </span><span class="inferred0"><a name="line211"
    />211 </span><span class="inferred1"><a name="line212" />212 # Returns an
    Array of user objects that represents the authenticated </span><span
    class="inferred0"><a name="line213" />213 # user's friends on Twitter.
    </span><span class="marked1"><a name="line214" />214 def friends
    </span><span class="marked0"><a name="line215" />215 @client.user(@id,
    :friends) </span><span class="marked1"><a name="line216" />216 end
    </span><span class="inferred0"><a name="line217" />217 end # User
    </span><span class="inferred1"><a name="line218" />218 </span><span
    class="inferred0"><a name="line219" />219 # Represents a status posted to
    &lt;tt&gt;Twitter&lt;/tt&gt; by a &lt;tt&gt;Twitter&lt;/tt&gt; user.
    </span><span class="marked1"><a name="line220" />220 class Status
    </span><span class="marked0"><a name="line221" />221 include ModelMixin
    </span><span class="marked1"><a name="line222" />222 @@ATTRIBUTES = [:id,
    :text, :created_at, :user] </span><span class="marked0"><a name="line223"
    />223 attr_accessor *@@ATTRIBUTES </span><span class="inferred1"><a
    name="line224" />224 </span><span class="marked0"><a name="line225" />225
    class &lt;&lt; self </span><span class="inferred1"><a name="line226" />226 #
    Used as factory method callback </span><span class="marked0"><a
    name="line227" />227 def attributes; @@ATTRIBUTES; end </span><span
    class="inferred1"><a name="line228" />228 </span><span class="inferred0"><a
    name="line229" />229 # Returns status model object with given
    &lt;tt&gt;status&lt;/tt&gt; using the </span><span class="inferred1"><a
    name="line230" />230 # configuration and credentials of the
    &lt;tt&gt;client&lt;/tt&gt; object passed in. </span><span
    class="marked0"><a name="line231" />231 def find(id, client) </span><span
    class="marked1"><a name="line232" />232 client.status(:get, id) </span><span
    class="marked0"><a name="line233" />233 end </span><span
    class="inferred1"><a name="line234" />234 </span><span class="inferred0"><a
    name="line235" />235 # Creates a new status for the authenticated user of
    the given </span><span class="inferred1"><a name="line236" />236 #
    &lt;tt&gt;client&lt;/tt&gt; context. </span><span class="inferred0"><a
    name="line237" />237 # </span><span class="inferred1"><a name="line238"
    />238 # You MUST include a valid/authenticated &lt;tt&gt;client&lt;/tt&gt;
    context </span><span class="inferred0"><a name="line239" />239 # in the
    given &lt;tt&gt;params&lt;/tt&gt; argument. </span><span
    class="inferred1"><a name="line240" />240 # </span><span
    class="inferred0"><a name="line241" />241 # For example: </span><span
    class="inferred1"><a name="line242" />242 # status = Twitter::Status.create(
    </span><span class="inferred0"><a name="line243" />243 # :text =&gt; 'I am
    shopping for flip flops', </span><span class="inferred1"><a name="line244"
    />244 # :client =&gt; client) </span><span class="inferred0"><a
    name="line245" />245 # </span><span class="inferred1"><a name="line246"
    />246 # An &lt;tt&gt;ArgumentError&lt;/tt&gt; will be raised if no valid
    client context </span><span class="inferred0"><a name="line247" />247 # is
    given in the &lt;tt&gt;params&lt;/tt&gt; Hash. For example, </span><span
    class="inferred1"><a name="line248" />248 # status =
    Twitter::Status.create(:text =&gt; 'I am shopping for flip flops')
    </span><span class="inferred0"><a name="line249" />249 # The above line of
    code will raise an &lt;tt&gt;ArgumentError&lt;/tt&gt;. </span><span
    class="inferred1"><a name="line250" />250 # </span><span
    class="inferred0"><a name="line251" />251 # The same is true when you do not
    provide a &lt;tt&gt;:text&lt;/tt&gt; key-value </span><span
    class="inferred1"><a name="line252" />252 # pair in the
    &lt;tt&gt;params&lt;/tt&gt; argument given. </span><span
    class="inferred0"><a name="line253" />253 # </span><span
    class="inferred1"><a name="line254" />254 # The Twitter::Status object
    returned after the status successfully </span><span class="inferred0"><a
    name="line255" />255 # updates on the Twitter server side is returned from
    this method. </span><span class="marked1"><a name="line256" />256 def
    create(params) </span><span class="marked0"><a name="line257" />257 client,
    text = params[:client], params[:text] </span><span class="marked1"><a
    name="line258" />258 raise ArgumentError, 'Valid client context must be
    provided' unless client.is_a?(Twitter::Client) </span><span
    class="marked0"><a name="line259" />259 raise ArgumentError, 'Must provide
    text for the status to update' unless text.is_a?(String) </span><span
    class="marked1"><a name="line260" />260 client.status(:post, text)
    </span><span class="inferred0"><a name="line261" />261 end </span><span
    class="inferred1"><a name="line262" />262 end </span><span
    class="inferred0"><a name="line263" />263 </span><span class="marked1"><a
    name="line264" />264 protected </span><span class="inferred0"><a
    name="line265" />265 # Constructor callback </span><span class="marked1"><a
    name="line266" />266 def init </span><span class="marked0"><a name="line267"
    />267 @user = User.new(@user) if @user.is_a?(Hash) </span><span
    class="marked1"><a name="line268" />268 @created_at =
    Time.parse(@created_at) if @created_at.is_a?(String) </span><span
    class="inferred0"><a name="line269" />269 end </span><span
    class="inferred1"><a name="line270" />270 end # Status </span><span
    class="inferred0"><a name="line271" />271 </span><span class="inferred1"><a
    name="line272" />272 # Represents a direct message on
    &lt;tt&gt;Twitter&lt;/tt&gt; between &lt;tt&gt;Twitter&lt;/tt&gt; users.
    </span><span class="marked0"><a name="line273" />273 class Message
    </span><span class="marked1"><a name="line274" />274 include ModelMixin
    </span><span class="marked0"><a name="line275" />275 @@ATTRIBUTES = [:id,
    :recipient, :sender, :text, :created_at] </span><span class="marked1"><a
    name="line276" />276 attr_accessor *@@ATTRIBUTES </span><span
    class="inferred0"><a name="line277" />277 </span><span class="marked1"><a
    name="line278" />278 class &lt;&lt; self </span><span class="inferred0"><a
    name="line279" />279 # Used as factory method callback </span><span
    class="marked1"><a name="line280" />280 def attributes; @@ATTRIBUTES; end
    </span><span class="inferred0"><a name="line281" />281 </span><span
    class="inferred1"><a name="line282" />282 # Raises
    &lt;tt&gt;NotImplementedError&lt;/tt&gt; because currently </span><span
    class="inferred0"><a name="line283" />283 # &lt;tt&gt;Twitter&lt;/tt&gt;
    doesn't provide a facility to retrieve </span><span class="inferred1"><a
    name="line284" />284 # one message by unique ID. </span><span
    class="marked0"><a name="line285" />285 def find(id, client) </span><span
    class="marked1"><a name="line286" />286 raise NotImplementedError, 'Twitter
    has yet to implement a REST API for this. This is not a Twitter4R library
    limitation.' </span><span class="marked0"><a name="line287" />287 end
    </span><span class="inferred1"><a name="line288" />288 </span><span
    class="inferred0"><a name="line289" />289 # Creates a new direct message
    from the authenticated user of the </span><span class="inferred1"><a
    name="line290" />290 # given &lt;tt&gt;client&lt;/tt&gt; context.
    </span><span class="inferred0"><a name="line291" />291 # </span><span
    class="inferred1"><a name="line292" />292 # You MUST include a
    valid/authenticated &lt;tt&gt;client&lt;/tt&gt; context </span><span
    class="inferred0"><a name="line293" />293 # in the given
    &lt;tt&gt;params&lt;/tt&gt; argument. </span><span class="inferred1"><a
    name="line294" />294 # </span><span class="inferred0"><a name="line295"
    />295 # For example: </span><span class="inferred1"><a name="line296" />296
    # status = Twitter::Message.create( </span><span class="inferred0"><a
    name="line297" />297 # :text =&gt; 'I am shopping for flip flops',
    </span><span class="inferred1"><a name="line298" />298 # :receipient =&gt;
    'anotherlogin', </span><span class="inferred0"><a name="line299" />299 #
    :client =&gt; client) </span><span class="inferred1"><a name="line300" />300
    # </span><span class="inferred0"><a name="line301" />301 # An
    &lt;tt&gt;ArgumentError&lt;/tt&gt; will be raised if no valid client context
    </span><span class="inferred1"><a name="line302" />302 # is given in the
    &lt;tt&gt;params&lt;/tt&gt; Hash. For example, </span><span
    class="inferred0"><a name="line303" />303 # status =
    Twitter::Status.create(:text =&gt; 'I am shopping for flip flops')
    </span><span class="inferred1"><a name="line304" />304 # The above line of
    code will raise an &lt;tt&gt;ArgumentError&lt;/tt&gt;. </span><span
    class="inferred0"><a name="line305" />305 # </span><span
    class="inferred1"><a name="line306" />306 # The same is true when you do not
    provide any of the following </span><span class="inferred0"><a
    name="line307" />307 # key-value pairs in the &lt;tt&gt;params&lt;/tt&gt;
    argument given: </span><span class="inferred1"><a name="line308" />308 # *
    &lt;tt&gt;text&lt;/tt&gt; - the String that will be the message text to send
    to &lt;tt&gt;user&lt;/tt&gt; </span><span class="inferred0"><a
    name="line309" />309 # * &lt;tt&gt;recipient&lt;/tt&gt; - the user ID,
    screen_name or Twitter::User object representation of the recipient of the
    direct message </span><span class="inferred1"><a name="line310" />310 #
    </span><span class="inferred0"><a name="line311" />311 # The
    Twitter::Message object returned after the direct message is </span><span
    class="inferred1"><a name="line312" />312 # successfully sent on the Twitter
    server side is returned from </span><span class="inferred0"><a
    name="line313" />313 # this method. </span><span class="marked1"><a
    name="line314" />314 def create(params) </span><span class="marked0"><a
    name="line315" />315 client, text, recipient = params[:client],
    params[:text], params[:recipient] </span><span class="marked1"><a
    name="line316" />316 raise ArgumentError, 'Valid client context must be
    given' unless client.is_a?(Twitter::Client) </span><span class="marked0"><a
    name="line317" />317 raise ArgumentError, 'Message text must be supplied to
    send direct message' unless text.is_a?(String) </span><span
    class="marked1"><a name="line318" />318 raise ArgumentError, 'Recipient user
    must be specified to send direct message' unless [Twitter::User, Integer,
    String].member?(recipient.class) </span><span class="marked0"><a
    name="line319" />319 client.message(:post, text, recipient) </span><span
    class="inferred1"><a name="line320" />320 end </span><span
    class="inferred0"><a name="line321" />321 end </span><span
    class="inferred1"><a name="line322" />322 </span><span class="marked0"><a
    name="line323" />323 protected </span><span class="inferred1"><a
    name="line324" />324 # Constructor callback </span><span class="marked0"><a
    name="line325" />325 def init </span><span class="marked1"><a name="line326"
    />326 @sender = User.new(@sender) if @sender.is_a?(Hash) </span><span
    class="marked0"><a name="line327" />327 @recipient = User.new(@recipient) if
    @recipient.is_a?(Hash) </span><span class="marked1"><a name="line328" />328
    @created_at = Time.parse(@created_at) if @created_at.is_a?(String)
    </span><span class="inferred0"><a name="line329" />329 end </span><span
    class="inferred1"><a name="line330" />330 end # Message </span><span
    class="inferred0"><a name="line331" />331 end # Twitter </span></pre>
    <hr />
    <p> Generated using the <a href='http://eigenclass.org/hiki.rb?rcov'> rcov
    code coverage analysis tool for Ruby </a> version 0.8.0. </p>
    <p>
      <a href='http://validator.w3.org/check/referer'>
        <img src='http://www.w3.org/Icons/valid-xhtml10' height='31' alt='Valid XHTML 1.0!' width='88' />
      </a>
      <a href='http://jigsaw.w3.org/css-validator/check/referer'>
        <img src='http://jigsaw.w3.org/css-validator/images/vcss' alt='Valid CSS!' style='border:0;width:88px;height:31px' />
      </a>
    </p>
  </body>
</html>
